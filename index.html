<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±äº¬è–èª•ä¹‹æ—… 2025</title>
    <link rel="manifest" href="/manifest.json">
    
    <style>
        /* 1. åŸºç¤è¨­ç½®èˆ‡å¥¶æ²¹æš–ç™½é…è‰² */
        body {
            font-family: 'Avenir Next', 'Hiragino Sans', 'Noto Sans TC', sans-serif;
            background-color: #FFFCF9; 
            margin: 0;
            padding: 0;
            color: #333333; 
        }
        /* é ‚éƒ¨å°èˆªæ¬„ */
        .tab-nav {
            display: flex;
            overflow-x: auto; 
            white-space: nowrap; 
            background-color: #FFFFFF;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.03); 
            padding: 10px 0;
            position: sticky;
            top: 0;
            z-index: 200; 
            justify-content: space-around; 
        }
        .tab-button {
            border: none;
            background: none;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            font-weight: 600;
            flex-shrink: 0;
            color: #AAAAAA;
            transition: color 0.3s;
        }
        .tab-button.active {
            color: #C48E44; /* ç±³é»ƒè‰²ç³»å¼·èª¿è‰² */
            border-bottom: 3px solid #C48E44;
        }

        /* 2. ä½ˆå±€èˆ‡å¡ç‰‡è¨­è¨ˆ */
        .content { padding: 10px 0; }
        
        /* Hero Header */
        .hero-header { position: relative; width: 100%; overflow: hidden; margin-bottom: -40px; }
        .hero-header img { width: 100%; height: auto; object-fit: contain; filter: brightness(0.9); display: block; }
        .hero-header::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 35%; background: linear-gradient(to top, rgba(0,0,0,0.65), rgba(0,0,0,0)); z-index: 1; }
        .hero-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 20px; box-sizing: border-box; z-index: 2; }
        
        /* æ—¥æœ¬æ™‚é–“æ™‚é˜ */
        .hero-time-group { position: absolute; top: 15px; left: 20px; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }
        .hero-time-label { color: #EEE; font-size: 0.7em; font-weight: 600; letter-spacing: 1px; display: block; margin-bottom: -5px; }
        .hero-time-display { font-size: 2.8em; font-weight: 700; line-height: 1; color: white; display: inline-block;}
        
        .hero-date-text { font-size: 0.9em; position: absolute; top: 70px; left: 20px; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.5); letter-spacing: 1px; }
        .countdown-display { position: absolute; top: 20px; right: 20px; color: white; font-size: 0.9em; font-weight: 600; background: rgba(0, 0, 0, 0.4); padding: 5px 10px; border-radius: 5px; letter-spacing: 1px; text-shadow: none; }
        
        /* æ—¥æœŸæ¢ */
        .calendar-strip { display: flex; overflow-x: auto; white-space: nowrap; margin: 0 20px; padding: 15px 0; background-color: transparent; position: relative; z-index: 10; }
        .day-tab-box { background-color: white; color: #333; border: 1px solid #EAEAEA; border-radius: 8px; padding: 8px 5px; margin-right: 12px; text-align: center; width: 60px; min-width: 60px; cursor: pointer; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); transition: all 0.2s; }
        .day-tab-box.active { background: #FFF8E0; border-color: #C48E44; color: #C48E44; transform: scale(1.02); }
        .day-tab-box .month-text { font-size: 0.7em; display: block; color: #888; margin-bottom: 2px; }
        .day-tab-box.active .month-text { color: #C48E44; }
        .day-tab-box .date-num { display: block; font-size: 1.4em; font-weight: 800; line-height: 1; margin-bottom: 2px; }
        .day-tab-box .day-text { font-size: 0.75em; display: block; font-weight: 600; }
        
        .day-title { margin: 0 20px 15px 20px; font-size: 1.8em; font-weight: bold; color: #444; letter-spacing: 2px; }
        .card { background-color: #FFFFFF; border-radius: 12px; padding: 20px 24px; margin: 0 20px 25px 20px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03); border: 1px solid #E8E8E8; line-height: 1.6; }
        
        /* å…ƒä»¶æ¨£å¼ */
        .flight-card { background-color: #7B6858; color: white; border-radius: 12px; padding: 20px; margin: 0 20px 25px 20px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); }
        .flight-header { display: flex; justify-content: space-between; align-items: center; }
        .flight-time, .flight-airport { font-size: 2em; font-weight: 700; line-height: 1; margin-bottom: 5px; }
        .flight-details { text-align: center; margin-top: 10px; font-weight: 500; }
        .flight-reminder { background: rgba(255, 255, 255, 0.2); color: white; padding: 5px 10px; border-radius: 6px; margin-top: 15px; display: inline-block; font-size: 0.9em; }
        .map-container { margin: 0 20px 20px 20px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }
        .map-container iframe { width: 100%; height: 250px; border: none; display: block; }
        .location-link { display: block; margin: 15px 0; text-decoration: none; font-weight: bold; color: #C48E44; font-size: 1.1em; padding: 10px 15px; background-color: #FFF8E0; border-radius: 8px; border: 1px solid #E8E8E8; text-align: center; transition: background-color 0.3s; }
        
        /* æ¨™ç±¤ */
        .tag { display: inline-block; padding: 4px 10px; margin: 3px 5px 3px 0; border-radius: 6px; font-size: 0.75em; font-weight: bold; }
        .tag-pass { background-color: #F4E8D4; color: #7B6858; } 
        .tag-must-do { background-color: #E6F3E6; color: #4CAF50; }
        .tag-food { background-color: #FFF0D6; color: #C48E44; } 
        .tag-reservation { background-color: #E0EBF7; color: #4C70A8; } 
        .tag-xmas { background-color: #EFE6DA; color: #6A5B4C; }
        .tag-buy { background-color: #F7E6E8; color: #8D545B; }
        .action-button { background-color: #C48E44; color: #FFFFFF; padding: 10px 15px; border-radius: 6px; transition: background-color 0.3s; border: none; font-weight: bold; }
        .action-button.green { background-color: #79A37B; color: #FFFFFF; }
        .weather-info { padding: 0; margin-bottom: 15px; border: none; box-shadow: none; background-color: transparent; }
        .weatherwidget-io { width: 100%; border-radius: 10px; overflow: hidden; border: 1px solid #E8E8E8; }

        .item-list { list-style: none; padding: 0; margin: 0; }
        .item-list li { padding: 10px 0; border-bottom: 1px dashed #E5E5E5; font-size: 0.95em; position: relative;}
        .item-list li:last-child { border-bottom: none; }
        .item-list .time { font-weight: bold; color: #555; margin-right: 8px; }
        
        /* è¨˜å¸³æ¨£å¼ */
        .budget-input-group { margin-bottom: 15px; }
        .budget-input-group input { padding: 10px; border-radius: 6px; border: 1px solid #E8E8E8; width: 100%; box-sizing: border-box; margin-top: 5px; }
        .budget-input-group .action-button { width: auto; display: inline-block; padding: 5px 10px; margin-top: 5px; }
        .budget-input-group input[type="number"]#exchangeRate { width: 80px; display: inline-block; }
        
        /* åˆªé™¤æŒ‰éˆ• */
        .delete-btn {
            position: absolute;
            right: 0;
            top: 10px;
            color: #D83A56;
            cursor: pointer;
            font-weight: bold;
            padding: 0 10px;
            background: #FFF0F0;
            border-radius: 4px;
            font-size: 0.8em;
        }
        
        /* Checkbox */
        .task-list { list-style: none; padding: 0; margin: 0; }
        .task-list li { padding: 10px 0; border-bottom: 1px dashed #E5E5E5; display: flex; align-items: center; }
        .task-list input[type="checkbox"] { margin-right: 15px; min-width: 20px; min-height: 20px; accent-color: #7B6858; cursor: pointer; }
    </style>
</head>
<body>

    <div class="tab-nav">
        <button id="tab-home-btn" class="tab-button active" onclick="showItinerary()">è¡Œç¨‹</button>
        <button id="tab-info-btn" class="tab-button" onclick="showTab('info', this)">è³‡è¨Š</button>
        <button id="tab-budget-btn" class="tab-button" onclick="showTab('budget', this)">è¨˜å¸³</button>
    </div>

    <div class="hero-header">
        <img src="/images/day01_arrival.jpg" alt="èƒŒæ™¯åœ–ç‰‡" class="hero-background" id="hero-img-bg"> 
        <div class="hero-content">
            <div class="hero-time-group">
                <span class="hero-time-label">TOKYO TIME</span>
                <div class="hero-time-display" id="hero-time-display">--:--</div>
            </div>
            <div class="hero-date-text" id="hero-date-text-display">2025.12.06 FRI</div>
            <div class="countdown-display" id="countdown-timer">è¨ˆç®—ä¸­...</div>
        </div>
    </div>
    
    <div class="calendar-strip">
        <div class="day-tab-box active" data-day-index="1" onclick="showDay('day-12-6', 1, this)"><span class="month-text">12æœˆ</span><span class="date-num">6</span><span class="day-text">FRI</span></div>
        <div class="day-tab-box" data-day-index="2" onclick="showDay('day-12-7', 2, this)"><span class="month-text">12æœˆ</span><span class="date-num">7</span><span class="day-text">SAT</span></div>
        <div class="day-tab-box" data-day-index="3" onclick="showDay('day-12-8', 3, this)"><span class="month-text">12æœˆ</span><span class="date-num">8</span><span class="day-text">SUN</span></div>
        <div class="day-tab-box" data-day-index="4" onclick="showDay('day-12-9', 4, this)"><span class="month-text">12æœˆ</span><span class="date-num">9</span><span class="day-text">MON</span></div>
        <div class="day-tab-box" data-day-index="5" onclick="showDay('day-12-10', 5, this)"><span class="month-text">12æœˆ</span><span class="date-num">10</span><span class="day-text">TUE</span></div>
        <div class="day-tab-box" data-day-index="6" onclick="showDay('day-12-11', 6, this)"><span class="month-text">12æœˆ</span><span class="date-num">11</span><span class="day-text">WED</span></div>
        <div class="day-tab-box" data-day-index="7" onclick="showDay('day-12-12', 7, this)"><span class="month-text">12æœˆ</span><span class="date-num">12</span><span class="day-text">THU</span></div>
    </div>
    
    <div class="content-wrapper">

        <div id="day-12-6" class="content">
            <div class="day-title">ç¬¬ä¸€å¤©ï¼šæŠµé”æ±äº¬</div>
            <div class="flight-card"><div class="flight-header"><div><span class="flight-time">08:00</span><p class="flight-airport" style="font-size: 0.6em;">TPE</p></div><div><span class="flight-time">12:20</span><p class="flight-airport" style="font-size: 0.6em;">NRT</p></div></div><div class="flight-details"><span class="flight-number">CI 0102</span></div></div>
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=A-PIT+Autobacs+Shinonome&t=&z=13&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card"><h3>âœˆï¸ äº¤é€šèˆ‡ä½å®¿</h3><ul class="item-list"><li>æ­ä¹˜ SKYLINER (12:42/13:02)</li><li>Check-in Comfort Hotel Tokyo Kanda (12/6 - 12/8)</li></ul></div>
            <div class="card"><h3>ğŸš— ä¸‹åˆæ´»å‹•</h3><a href="https://www.google.com/maps/search/?api=1&query=A-PIT+AUTOBACS+SHINONOME" target="_blank" class="location-link">ğŸ“ æ±é›² A pit</a></div>
            <div class="card"><h3>ğŸ½ï¸ æ™šé¤é ç´„</h3><a href="https://www.google.com/maps/search/?api=1&query=Nikuya+Yokocho+Akihabara" target="_blank" class="location-link">ğŸ“ è‚‰å±‹æ©«ä¸ ç§‹è‘‰åŸ</a><ul class="item-list"><li>20:00 é ç´„ <span class="tag tag-reservation">é‡è¦</span></li></ul></div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-label_1="TOKYO" data-theme="original" >TOKYO WEATHER</a></div>
        </div>
        
        <div id="day-12-7" class="content" style="display:none;">
            <div class="day-title">ç¬¬äºŒå¤©ï¼šå·è¶Šèˆ‡åœ°ç“œå“‡</div>
            <img src="/images/day02_kawagoe.jpg" alt="å·è¶Š" class="hero-background" style="width:100%; border-radius:10px; margin-bottom:15px;">
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=Kawagoe+Hikawa+Shrine&t=&z=13&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card">
                <h3>ğŸ„ æˆ¶å¤–æ´»å‹•</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Ueno+Park" target="_blank" class="location-link">ğŸ“ ä¸Šé‡è–èª•å¸‚é›†</a>
                <ul class="item-list">
                    <li>å·è¶ŠåŠæ—¥éŠ</li>
                    <li><span class="tag tag-xmas">è–èª•å¸‚é›†</span> æ±äº¬è–èª• Advent</li>
                    <li>æ™´ç©ºå¡”è–èª•å¸‚é›†</li>
                </ul>
            </div>
            <div class="card"><h3>ğŸ½ï¸ æ™šé¤é ç´„</h3><a href="https://www.google.com/maps/search/?api=1&query=Yakiniku+Yacchan+Kanda" target="_blank" class="location-link">ğŸ“ ç„¼è‚‰ã‚„ã£ã¡ã‚ƒã‚“ ç¥ç”°åº—</a><ul class="item-list"><li>21:30 é ç´„</li></ul></div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-label_1="TOKYO" data-theme="original" >TOKYO WEATHER</a></div>
        </div>
        
        <div id="day-12-8" class="content" style="display:none;">
            <div class="day-title">ç¬¬ä¸‰å¤©ï¼šå¬°å…’å£«å°¼</div>
            <img src="/images/day03_disney_land.jpg" alt="è¿ªå£«å°¼" class="hero-background" style="width:100%; border-radius:10px; margin-bottom:15px;">
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=Tokyo+Disneyland&t=&z=13&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card">
                <h3>ğŸ° è¿ªå£«å°¼æ¨‚åœ’</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Tokyo+Disneyland" target="_blank" class="location-link">ğŸ“ æ±äº¬è¿ªå£«å°¼æ¨‚åœ’</a>
                <ul class="item-list">
                    <li><span class="time">09:00</span> ã‚¢ãƒªã‚¨ã‚¹ æ–°å®¿æ±å—å£åº— <span class="tag tag-reservation">é ç´„</span></li>
                    <li><span class="time">17:00</span> ç¾å¥³èˆ‡é‡ç¸ <span class="tag tag-reservation">DPAå·²è²·</span></li>
                </ul>
            </div>
            <div class="card">
                <h3>ğŸ¢ å¿…ç©èˆ‡ç¾é£Ÿ</h3>
                <ul class="item-list">
                    <li>å¿«é€Ÿé€šé—œï¼š<span class="tag tag-pass">å·¨é›·å±±</span>ã€<span class="tag tag-pass">å¹½éˆå…¬é—œ</span></li>
                    <li>å¿…ç©ï¼š<span class="tag tag-must-do">å°å°ä¸–ç•Œ</span>ã€<span class="tag tag-must-do">æ¯éºµ</span>ã€<span class="tag tag-must-do">ç™½é›ªå…¬ä¸»</span></li>
                    <li>éŠè¡Œï¼š<span class="time">12:45</span> è–èª•éŠè¡Œ / <span class="time">19:00</span> å¤¢ä¹‹å…‰</li>
                    <li>ç¾é£Ÿï¼š<span class="tag tag-food">æ°´æ™¶å®® (åƒåˆ°é£½)</span>ã€<span class="tag tag-food">ä¸­å¤®å¤§é“å’–å•¡å»³</span></li>
                </ul>
            </div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-label_1="TOKYO" data-theme="original" >TOKYO WEATHER</a></div>
        </div>

        <div id="day-12-9" class="content" style="display:none;">
            <div class="day-title">ç¬¬å››å¤©ï¼šå¬°å…’å£«å°¼æµ·æ´‹</div>
            <img src="/images/day04_disney_sea.jpg" alt="æµ·æ´‹" class="hero-background" style="width:100%; border-radius:10px; margin-bottom:15px;">
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=Tokyo+DisneySea&t=&z=13&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card">
                <h3>ğŸ”± è¿ªå£«å°¼æµ·æ´‹ (å¤¢å¹»æ³‰é„‰)</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Tokyo+DisneySea" target="_blank" class="location-link">ğŸ“ æ±äº¬è¿ªå£«å°¼æµ·æ´‹</a>
                <ul class="item-list">
                    <li><span class="time">08:20</span> æ—©é¤é ç´„</li>
                    <li>é ç´„è¨­æ–½ï¼š<span class="time">10:00</span> Elsaã€<span class="time">11:30</span> æ¨‚ä½©ã€<span class="time">13:30</span> å½¼å¾—æ½˜</li>
                </ul>
            </div>
            <div class="card">
                <h3>ğŸ¢ å¿…ç©èˆ‡ç¾é£Ÿ</h3>
                <ul class="item-list">
                    <li>å¿…ç©ï¼š<span class="tag tag-pass">ç©å…·ç¸½å‹•å“¡</span>ã€<span class="tag tag-pass">é©šé­‚å¤å¡”</span>ã€<span class="tag tag-pass">åœ°å¿ƒæ¢éšª</span></li>
                    <li>è¡¨æ¼”ï¼š<span class="time">14:15</span> è–èª•è¿è³“æœƒ / <span class="time">15:25</span> é”è²æ—…ç¨‹</li>
                    <li>ä½å®¿ï¼šCheck-in REMM PLUS GINZA</li>
                </ul>
            </div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-label_1="TOKYO" data-theme="original" >TOKYO WEATHER</a></div>
        </div>

        <div id="day-12-10" class="content" style="display:none;">
            <div class="day-title">ç¬¬äº”å¤©ï¼šå˜å“‡æ¨‚åœ’</div>
            <img src="/images/day05_chiikawa.jpg" alt="å‰ä¼Šå¡å“‡" class="hero-background" style="width:100%; border-radius:10px; margin-bottom:15px;">
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=Harajuku+Takeshita+Street&t=&z=14&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card">
                <h3>ğŸ›ï¸ è³¼ç‰©èˆ‡ç¾é£Ÿ</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Chiikawa+Land+Harajuku" target="_blank" class="location-link">ğŸ“ å‰ä¼Šå¡å“‡æ¨‚åœ’</a>
                <ul class="item-list">
                    <li><span class="time">åˆé¤</span> ã­ãã— Negishæ± è¢‹æ±å£åº— <span class="tag tag-food">ç‰›èˆŒ</span></li>
                    <li><span class="time">13:40</span> å‰ä¼Šå¡å“‡æ¨‚åœ’ (å…¥å ´)</li>
                    <li><span class="time">ä¸‹åˆ</span> åŸå®¿é€›è¡—</li>
                </ul>
            </div>
            <div class="card">
                <h3>ğŸ„ è–èª•å¤œæ™¯</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Meiji+Jingu+Gaien" target="_blank" class="location-link">ğŸ“ æ˜æ²»ç¥å®®å¤–è‹‘</a>
                <ul class="item-list">
                    <li><span class="tag tag-xmas">è–èª•å¸‚é›†</span> æ˜æ²»ç¥å®®å¤–è‹‘</li>
                    <li><span class="tag tag-xmas">å¯é¸</span> èŠå…¬åœ’</li>
                </ul>
            </div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-theme="original" >TOKYO WEATHER</a></div>
        </div>
        
        <div id="day-12-11" class="content" style="display:none;">
            <div class="day-title">ç¬¬å…­å¤©ï¼šå…­æœ¬æœ¨è²¢ä¸¸ä¹‹å…§</div>
            <img src="/images/day06_roppongi.jpg" alt="å…­æœ¬æœ¨" class="hero-background" style="width:100%; border-radius:10px; margin-bottom:15px;">
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=Roppongi+Hills&t=&z=14&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card">
                <h3>ğŸ—¼ å¸‚å€æ´»å‹•</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Roppongi+Hills" target="_blank" class="location-link">ğŸ“ å…­æœ¬æœ¨æ–°åŸ & éº»å¸ƒå°hills</a>
                <ul class="item-list">
                    <li><span class="time">æ—©é¤</span> Tricolore coffee <span class="tag tag-food">å’–å•¡</span></li>
                    <li><span class="time">ä¸Šåˆ</span> BINGO Sports <span class="tag tag-buy">çœ‹è»Š</span></li>
                    <li><span class="time">ä¸­åˆ</span> å…­æœ¬æœ¨æ–°åŸ & éº»å¸ƒå°hills</li>
                    <li><span class="time">æ™šä¸Š</span> ä¸¸ä¹‹å…§street park</li>
                </ul>
            </div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-theme="original" >TOKYO WEATHER</a></div>
        </div>

        <div id="day-12-12" class="content" style="display:none;">
            <div class="day-title">ç¬¬ä¸ƒå¤©ï¼šè¿”ç¨‹æ—¥</div>
            <div class="flight-card"><div class="flight-header"><div><span class="flight-time">14:20</span><p class="flight-airport">NRT</p></div><div><span class="flight-time">18:40</span><p class="flight-airport">TPE</p></div></div><div class="flight-details"><span class="flight-number">CI 0127</span></div></div>
            <img src="/images/day07_departure.jpg" alt="è¿”ç¨‹" class="hero-background" style="width:100%; border-radius:10px; margin-bottom:15px;">
            <div class="map-container">
                <iframe src="https://maps.google.com/maps?q=Narita+International+Airport&t=&z=12&ie=UTF8&iwloc=&output=embed" loading="lazy"></iframe>
            </div>
            <div class="card">
                <h3>âœˆï¸ è¿”ç¨‹èˆ‡è³¼ç‰©</h3>
                <a href="https://www.google.com/maps/search/?api=1&query=Narita+International+Airport" target="_blank" class="location-link">ğŸ“ æˆç”°æ©Ÿå ´</a>
                <ul class="item-list">
                    <li><span class="time">ä¸Šåˆ</span> Check-out é£¯åº—</li>
                    <li><span class="time">äº¤é€š</span> SKYLINER (14:20/14:37)</li>
                </ul>
            </div>
            <div class="weather-info"><a class="weatherwidget-io" href="https://forecast7.com/zh-tw/35d69139d69/tokyo/" data-theme="original" >TOKYO WEATHER</a></div>
        </div>


        <div id="info" class="content" style="display:none;">
            <div class="day-title">ğŸ“ æ—…ç¨‹è³‡è¨Šç¸½è¦½</div>
            <div class="card"><h3>ğŸ—“ï¸ é‡è¦é ç´„</h3><ul class="item-list"><li>12/6 20:00 è‚‰å±‹æ©«ä¸ ç§‹è‘‰åŸ</li><li>12/7 21:30 ç„¼è‚‰ã‚„ã£ã¡ã‚ƒã‚“ ç¥ç”°åº—</li><li>12/8 09:00 ã‚¢ãƒªã‚¨ã‚¹ æ–°å®¿æ±å—å£åº—</li><li>12/8 17:00 ç¾å¥³èˆ‡é‡ç¸</li><li>12/10 13:40 å‰ä¼Šå¡å“‡æ¨‚åœ’</li></ul></div>
            <div class="card">
                <h3>âœ… ä»»å‹™/æ‰“åŒ…æ¸…å–®</h3>
                <ul class="task-list">
                    <li><input type="checkbox" id="t1"><label for="t1">è­·ç…§ã€ç°½è­‰</label></li>
                    <li><input type="checkbox" id="t2"><label for="t2">ESIM / ç¶²å¡</label></li>
                    <li><input type="checkbox" id="t3"><label for="t3">æ—¥å¹£ç¾é‡‘</label></li>
                    <li><input type="checkbox" id="t4"><label for="t4">SKYLINER è»Šç¥¨</label></li>
                    <li><input type="checkbox" id="t5"><label for="t5">è–èª•å¸‚é›†é–€ç¥¨</label></li>
                </ul>
            </div>
        </div>

        <div id="budget" class="content" style="display:none;">
            <div class="day-title">ğŸ’° è¨˜å¸³ä¸­å¿ƒ (é›²ç«¯ç‰ˆ)</div>
            
            <div class="card" style="background-color: #FFF0E6; border: 1px solid #D4A373;">
                <h3>ğŸ“Š é ç®—æ¦‚è¦½</h3>
                <div class="budget-input-group">
                    <label>ç¸½é ç®— (TWD):</label>
                    <input type="number" id="totalBudgetTWD" value="0" placeholder="è¨­å®šå°å¹£ç¸½é ç®—">
                    <button onclick="saveSettings()" class="action-button" style="background-color:#D4A373; color:white; margin-top: 5px;">å„²å­˜è¨­å®š</button>
                </div>
                <p style="margin-top: 15px;">
                    ç¸½é ç®—: <strong id="budget-twd-display" style="color:#D4A373;">NT$ 0</strong><br>
                    å·²æ”¯å‡º: <strong id="total-spent-twd" style="color:#D83A56;">è®€å–ä¸­...</strong><br>
                    å‰©é¤˜: <strong id="remaining-twd" style="color:#79A37B;">è®€å–ä¸­...</strong>
                </p>
                <hr style="border-top:1px dashed #ccc;">
                <p>
                    åŒ¯ç‡: <input type="number" id="exchangeRate" value="0.215" step="0.001" style="width:60px;"> 
                    (æ—¥å¹£ç¸½æ”¯: <span id="total-spent-jpy">...</span>)
                </p>
            </div>
            
            <div class="card">
                <h3>â• æ–°å¢æ”¯å‡º</h3>
                <div class="budget-input-group">
                    <label>ä½¿ç”¨è€…:</label>
                    <input type="text" id="expenseUser" placeholder="ä¾‹å¦‚ï¼šå“‡" list="user-options">
                    <datalist id="user-options"><option value="å“‡"></option><option value="æ›¸"></option></datalist>
                </div>
                <div class="budget-input-group">
                    <input type="text" id="expenseDesc" placeholder="é …ç›®">
                </div>
                <div class="budget-input-group">
                    <input type="number" id="expenseAmount" placeholder="é‡‘é¡ (JPY)">
                </div>
                <button onclick="handleExpense('add')" class="action-button green" id="add-btn" style="margin-top: 5px;">è¨˜éŒ„æ”¯å‡º</button>
            </div>

            <div class="card">
                <h3>ğŸ§¾ æ”¯å‡ºæ˜ç´° (å¯åˆªé™¤)</h3>
                <ul id="expenseList" class="item-list"><li>è¼‰å…¥ä¸­...</li></ul>
            </div>
        </div>

    </div>

    <script>
        // === ğŸ”´ Google Apps Script ç¶²å€ (å·²è‡ªå‹•å¡«å…¥) ===
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzQ9JTsKgQIs22NzJjLxQseBD2YFWwE9xGJmYRMWgyVv5d8nci1JUazXnvhIB9bkdY-yw/exec';

        // === ç‹€æ…‹è¨˜æ†¶èˆ‡å°èˆª ===
        let currentDayId = 'day-12-6';
        let currentDayIndex = 1;

        function showDay(tabId, dayIndex, clickedButton) {
            currentDayId = tabId; currentDayIndex = dayIndex;
            hideAll();
            document.getElementById(tabId).style.display = 'block';
            showHero(true);
            updateNav('tab-home-btn');
            if(clickedButton) updateStrip(clickedButton);
            else document.querySelector(`.day-tab-box[data-day-index="${dayIndex}"]`).classList.add('active');
            updateHeroContent(dayIndex);
        }

        function showTab(tabId, clickedButton) {
            hideAll();
            document.getElementById(tabId).style.display = 'block';
            showHero(false);
            updateNav(clickedButton.id);
        }

        function showItinerary() { showDay(currentDayId, currentDayIndex, null); }

        function hideAll() {
            const ids = ['day-12-6', 'day-12-7', 'day-12-8', 'day-12-9', 'day-12-10', 'day-12-11', 'day-12-12', 'info', 'budget'];
            ids.forEach(id => {
                const el = document.getElementById(id);
                if(el) el.style.display = 'none';
            });
        }
        function showHero(show) {
            document.querySelector('.hero-header').style.display = show ? 'block' : 'none';
            document.querySelector('.calendar-strip').style.display = show ? 'flex' : 'none';
        }
        function updateNav(activeId) {
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById(activeId).classList.add('active');
        }
        function updateStrip(btn) {
            document.querySelectorAll('.day-tab-box').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        // === Hero Data & Clock ===
        const DATE_MAP = {
            1: { src: '/images/day01_arrival.jpg', fullDate: '2025.12.06 FRI', departureTime: '2025-12-06T08:00:00' },
            2: { src: '/images/day02_kawagoe.jpg', fullDate: '2025.12.07 SAT', departureTime: '2025-12-07T09:00:00' },
            3: { src: '/images/day03_disney_land.jpg', fullDate: '2025.12.08 SUN', departureTime: '2025-12-08T08:00:00' },
            4: { src: '/images/day04_disney_sea.jpg', fullDate: '2025.12.09 MON', departureTime: '2025-12-09T08:20:00' },
            5: { src: '/images/day05_chiikawa.jpg', fullDate: '2025.12.10 TUE', departureTime: '2025-12-10T09:00:00' },
            6: { src: '/images/day06_roppongi.jpg', fullDate: '2025.12.11 WED', departureTime: '2025-12-11T08:00:00' },
            7: { src: '/images/day07_departure.jpg', fullDate: '2025.12.12 THU', departureTime: '2025-12-12T14:20:00' }
        };
        
        function updateHeroContent(idx) {
            const d = DATE_MAP[idx];
            if(d) {
                document.getElementById('hero-img-bg').src = d.src;
                // æ™‚é–“ä¸å†éœæ…‹æ›´æ–°ï¼Œè€Œæ˜¯ç”±æ™‚é˜æ§åˆ¶
                document.getElementById('hero-date-text-display').textContent = d.fullDate;
                document.getElementById('countdown-timer').dataset.targetTime = d.departureTime;
                updateCountdown();
            }
        }
        
        function updateJapanClock() {
            const options = { timeZone: 'Asia/Tokyo', hour: '2-digit', minute: '2-digit', hour12: false };
            const timeString = new Date().toLocaleTimeString('en-US', options);
            document.getElementById('hero-time-display').textContent = timeString;
        }

        // === è¨˜å¸³é‚è¼¯ (Apps Script) ===
        function fetchExpenses() {
            document.getElementById('total-spent-twd').textContent = 'æ›´æ–°ä¸­...';
            
            fetch(SCRIPT_URL)
                .then(r => r.json())
                .then(data => {
                    renderExpenses(data);
                    updateSummary(data);
                })
                .catch(e => {
                    console.error(e);
                    document.getElementById('expenseList').innerHTML = '<li style="color:red">é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ Script ç¶²å€</li>';
                });
        }

        function renderExpenses(data) {
            const list = document.getElementById('expenseList');
            list.innerHTML = '';
            if(!data || data.length === 0) { list.innerHTML = '<li>ç„¡è³‡æ–™</li>'; return; }
            
            data.slice().reverse().forEach(item => {
                const li = document.createElement('li');
                let dateStr = 'N/A';
                if(item.timestamp) {
                    const d = new Date(item.timestamp);
                    dateStr = `${d.getMonth()+1}/${d.getDate()}`;
                }
                
                li.innerHTML = `
                    <span class="time">${dateStr}</span> 
                    [${item.user}] ${item.desc}: Â¥${item.jpy}
                    <span class="delete-btn" onclick="handleExpense('delete', ${item.row})">åˆªé™¤</span>
                `;
                list.appendChild(li);
            });
        }

        function updateSummary(data) {
            let jpy = 0, twd = 0;
            data.forEach(d => { jpy += d.jpy; twd += d.twd; });
            
            const budget = parseFloat(localStorage.getItem('totalBudgetTWD') || 0);
            document.getElementById('total-spent-jpy').textContent = `Â¥${jpy.toLocaleString()}`;
            document.getElementById('total-spent-twd').textContent = `NT$ ${Math.round(twd).toLocaleString()}`;
            
            const remaining = budget - twd;
            const el = document.getElementById('remaining-twd');
            el.textContent = `NT$ ${Math.round(remaining).toLocaleString()}`;
            el.style.color = remaining < 0 ? '#D83A56' : '#79A37B';
        }

        function handleExpense(action, rowId) {
            const btn = document.getElementById('add-btn');
            let payload = { action: action };
            
            if(action === 'add') {
                const user = document.getElementById('expenseUser').value;
                const desc = document.getElementById('expenseDesc').value;
                const jpy = parseFloat(document.getElementById('expenseAmount').value);
                const rate = parseFloat(document.getElementById('exchangeRate').value);
                if(!user || !desc || isNaN(jpy)) { alert('è«‹å¡«å¯«å®Œæ•´'); return; }
                
                payload.user = user;
                payload.desc = desc;
                payload.jpy = jpy;
                payload.twd = Math.round(jpy * rate);
                
                btn.textContent = 'å‚³é€ä¸­...';
                btn.disabled = true;
            } else if (action === 'delete') {
                if(!confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†è³‡æ–™å—ï¼Ÿ')) return;
                payload.row = rowId;
            }

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            })
            .then(() => {
                if(action === 'add') {
                    alert('å·²æ–°å¢ï¼');
                    document.getElementById('expenseDesc').value = '';
                    document.getElementById('expenseAmount').value = '';
                    btn.textContent = 'è¨˜éŒ„æ”¯å‡º';
                    btn.disabled = false;
                } else {
                    alert('å·²åˆªé™¤è«‹æ±‚ (è«‹ç¨å€™æ›´æ–°)');
                }
                setTimeout(fetchExpenses, 2000); 
            })
            .catch(err => {
                alert('ç™¼ç”ŸéŒ¯èª¤');
                console.error(err);
                if(btn) btn.disabled = false;
            });
        }

        function saveSettings() {
            localStorage.setItem('totalBudgetTWD', document.getElementById('totalBudgetTWD').value);
            localStorage.setItem('exchangeRate', document.getElementById('exchangeRate').value);
            localStorage.setItem('expenseUser', document.getElementById('expenseUser').value);
            document.getElementById('budget-twd-display').textContent = `NT$ ${parseFloat(document.getElementById('totalBudgetTWD').value).toLocaleString()}`;
            fetchExpenses();
            alert('è¨­å®šå·²å„²å­˜');
        }

        function loadData() {
            document.getElementById('totalBudgetTWD').value = localStorage.getItem('totalBudgetTWD') || 0;
            document.getElementById('exchangeRate').value = localStorage.getItem('exchangeRate') || 0.215;
            document.getElementById('expenseUser').value = localStorage.getItem('expenseUser') || '';
            document.getElementById('budget-twd-display').textContent = `NT$ ${parseFloat(document.getElementById('totalBudgetTWD').value).toLocaleString()}`;
            
            if(SCRIPT_URL.includes('http')) fetchExpenses();
        }

        function updateCountdown() {
            if(document.getElementById('info').style.display === 'block' || document.getElementById('budget').style.display === 'block') return;
            const targetStr = document.getElementById('countdown-timer').dataset.targetTime;
            if(!targetStr) return;
            const target = new Date(targetStr).getTime();
            const now = new Date().getTime();
            const dist = target - now;
            if (dist < 0) { document.getElementById('countdown-timer').textContent = "é€²è¡Œä¸­"; return; }
            const d = Math.floor(dist / 86400000);
            const h = Math.floor((dist % 86400000) / 3600000);
            const m = Math.floor((dist % 3600000) / 60000);
            document.getElementById('countdown-timer').textContent = `å€’æ•¸: ${d}å¤© ${h}æ™‚ ${m}åˆ†`;
        }

        window.addEventListener('load', () => {
            loadData();
            
            document.querySelectorAll('.task-list input').forEach(box => {
                box.checked = localStorage.getItem(box.id) === 'true';
                box.addEventListener('change', () => localStorage.setItem(box.id, box.checked));
            });

            const startBtn = document.querySelector(`.day-tab-box[data-day-index="1"]`);
            if(startBtn) showDay('day-12-6', 1, startBtn);
            
            setInterval(updateCountdown, 60000);
            setInterval(updateJapanClock, 1000); // å•Ÿå‹•æ—¥æœ¬æ™‚é˜
            updateJapanClock();
            
            // Weather Widget
            var s = document.createElement('script'); 
            s.src = 'https://weatherwidget.io/js/widget.min.js';
            document.body.appendChild(s);
        });
        
        if ('serviceWorker' in navigator) navigator.serviceWorker.register('/service-worker.js');
    </script>
</body>
</html>
